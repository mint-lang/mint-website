import {patternVariable as M,createProvider as R,bracketAccess as W,createElement as S,subscriptions as P,newVariant as O,useSignal as U,toArray as Z,compare as N,pattern as L,access as X,signal as Q,useId as Y,style as T,match as K,or as V} from "./runtime.js";import {A as J} from "./92.js";import {a as ac} from "./90.js";import {a as u} from "./88.js";import {e as ab,d as aa,A as I,c as v,b as t,a as q} from "./94.js";import {a as h} from "./82.js";import {a as f} from "./81.js";import {a as e} from "./93.js";import {fc as ad,CC as H,BN as G,CA as F,CB as E,ab as z,ac as y,AI as D,AJ as C,gg as s,gc as r,ld as o,lt as n,lq as m,ln as l,kd as k,kb as j,dq as i,bv as g,AH as B,jt as d,AG as A,bh as c,a as x,b as w,m as p} from "./index.js";export const ae=(af)=>{return c(af,[],(ag,ah)=>{return K(ah,[[L(A,[M]),(ai)=>{return d(ag,ai)}],[L(B,[]),()=>{return ag}]])})},aj=(ak)=>{return (ak.event.stopPropagation())},al=(am)=>{return (am.event.preventDefault())},an=(ao)=>{const ap=(ao.ctrlKey && !N(ao.keyCode,17)?O(A)(17):new B());const aq=(ao.shiftKey && !N(ao.keyCode,16)?O(A)(16):new B());const ar=e(ae([O(A)(ao.keyCode),ap,aq]),(as)=>{return as});const at=(document.querySelector("*:focus"));return (()=>{const _0=[];const _1=P(au);let _i=-1;for(let av of _1){_i++;_0.push((()=>{const _0=[];const _1=av.shortcuts;let _i=-1;for(let aw of _1){_i++;const _2=(()=>{const ax=e(aw.shortcut,(ay)=>{return ay});return (N(ax,ar) && aw.condition()) && (!at || aw.bypassFocused)})();if(!_2){continue};_0.push((()=>{aj(ao);al(ao);return aw.action()})())};return _0})())};return _0})()},az=Q(new B()),au=new Map(),AA=R(au,()=>{return (f(P(au))?(()=>{g(az.value,(ba)=>{return ba()});return (()=>{az.value=new B()})()})():(N(az.value,new B())?(()=>{az.value=O(A)(h(`keydown`,true,an))})():null))}),bb=17,bc=83,bd=(be,bf)=>{return !N(i(be,bf),new B())},bg=(bh,bi)=>{return bd(bh.headers,(bj)=>{return N(j(bj.key),j(bi))})},bk=(bl,bm)=>{return (bg(bl,`Content-Type`)?{...bl,body: (JSON.stringify(bm))}:k({...bl,body: (JSON.stringify(bm))},`Content-Type`,`application/json`))},bn=(bo)=>{return l(m(n(),`PUT`),bo)},bp=async (bq,br,bs)=>{const bt=({ content: bq, title: br });return o(bk(bn(await `${`https://api.mint-lang.com`}/sandbox/${bs}`),bt),p)},bu=q(`Tutorial`,`/tutorial/`,r),bv=q(`Login with GitHub to Fork`,`${`https://api.mint-lang.com`}/auth/github`,s),bw=(bx)=>{return (new Promise((resolve, reject) => {
      let result = window.confirm(bx)

      if (result) {
        resolve(O(C)((result)))
      } else {
        resolve(O(D)(`User cancelled!`))
      }
    }))},by=(bz)=>{return l(m(n(),`DELETE`),bz)},ca=async (cb)=>{return K(await bw(`Are you sure?`),[[L(C,[]),()=>{return (async ()=>{const cc=o(by(`${`https://api.mint-lang.com`}/sandbox/${cb}`),p);return K(await cc,[[L(D,[]),()=>{return t(`Could not delete the sandbox!`)}],[L(C,[]),()=>{return u(`/sandbox/mine`)}]])})()}],[null,()=>{return null}]])},cd=S(`svg`,{"viewBox":`0 0 24 24`},[S(`g`,{"stroke-linejoin":`round`,"stroke-linecap":`round`,"stroke":`currentColor`,"fill":`none`,style:T([`stroke-width: var(--tabler-stroke-width);`])},[S(`path`,{"d":`M4 7l16 0`}),S(`path`,{"d":`M10 11l0 6`}),S(`path`,{"d":`M14 11l0 6`}),S(`path`,{"d":`M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12`}),S(`path`,{"d":`M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3`})])]),ce=S(`svg`,{"viewBox":`0 0 24 24`},[S(`g`,{"stroke-linejoin":`round`,"stroke-linecap":`round`,"stroke":`currentColor`,"fill":`none`,style:T([`stroke-width: var(--tabler-stroke-width);`])},[S(`path`,{"d":`M6 4h10l4 4v10a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12a2 2 0 0 1 2 -2`}),S(`path`,{"d":`M12 14m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0`}),S(`path`,{"d":`M14 4l0 4l-6 0l0 -4`})])]),cf=async (cg)=>{const ch=o(v(`${`https://api.mint-lang.com`}/sandbox/${cg}/fork`),p);return K(await ch,[[L(C,[M]),(ci)=>{return u(`/sandbox/${ci.id}`)}],[L(D,[]),()=>{return t(`Could not fork the sandbox!`)}]])},cj=S(`svg`,{"viewBox":`0 0 24 24`},[S(`g`,{"stroke-linejoin":`round`,"stroke-linecap":`round`,"stroke":`currentColor`,"fill":`none`,style:T([`stroke-width: var(--tabler-stroke-width);`])},[S(`path`,{"d":`M12 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0`}),S(`path`,{"d":`M7 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0`}),S(`path`,{"d":`M17 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0`}),S(`path`,{"d":`M7 8v2a2 2 0 0 0 2 2h6a2 2 0 0 0 2 -2v-2`}),S(`path`,{"d":`M12 12l0 4`})])]),AB=({a,b})=>{const ck=U(new B()),cl=U(new B()),cm=U(new B()),cn=async ()=>{const [co,cp,cq]=cr();const cs=V(B,D,g(W(co.files,0,A,B),X(`contents`)),``);const ct=await bp(cs,V(B,D,cm.value,cp.title),cp.id);return K(ct,[[L(C,[M]),(cu)=>{return (()=>{ck.value=O(A)(cu)})()}],[L(D,[]),()=>{return t(`Cannot save project!`)}]])},cr=()=>{const cv=V(B,D,ck.value,a);const cw=w({files:[x({solution:``,contents:cv.content,path:`Main.mint`})],activeFile:`Main.mint`});return [V(B,D,cl.value,cw),cv,cw]},cx=Y();AA(cx,()=>{return y({shortcuts:[z({shortcut:[bb,bc],condition:()=>{return true},bypassFocused:true,action:cn})]})});const [cy,cz,da]=cr();const [db,dc]=(N(cz.id,``)?[[bu],new B()]:K(b,[[L(E,[]),()=>{return [[bv],new B()]}],[L(F,[M]),(dd)=>{return (N(dd.id,cz.userId)?[[aa(()=>{return ca(cz.id)},`Delete`,cd),aa(cn,`Save`,ce,N(cy,da) && N((V(B,D,cm.value,cz.title)),cz.title)),new G(),ab],O(A)(S(`input`,{"value":V(B,D,cm.value,cz.title),"onInput":(de)=>{return (()=>{cm.value=O(A)(ac(de.target))})()},className:`cf`}))]:[[aa(()=>{return cf(cz.id)},`Fork`,cj)],new B()])}],[L(H,[]),()=>{return [[],new B()]}]]));return S(I,{f:V(B,D,dc,S(`strong`,{},[cz.title])),g:db},Z(S(J,{a:(df)=>{return (()=>{cl.value=O(A)(df)})()},c:(ad.value?`vertical`:`horizontal`),b:cy})))};export default AB;